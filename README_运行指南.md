# 股票量化交易项目运行指南

## 项目简介
这是一个基于Python的股票量化交易项目，主要实现了"二波"交易策略分析。项目使用多个金融数据源获取股票数据，并通过SQLite数据库进行数据存储和管理。

## 项目结构
```
stock/
├── init/                    # 初始化和数据处理模块
│   ├── __init__.py
│   ├── data_prepare.py      # 数据获取和准备
│   ├── proxy_pool.yaml      # 代理池配置
│   ├── sql_op.py           # 数据库操作
│   └── validate.py         # 数据验证
├── strategy/               # 交易策略模块
│   ├── __init__.py
│   └── erbo.py            # 二波策略实现
├── test.py                # 主程序入口
├── requirements.txt       # 依赖包列表
├── stock_data.db          # SQLite数据库文件
└── result.xlsx           # 结果输出文件
```

## 环境依赖

### 必需的Python包
项目已成功安装了以下依赖包：
- **数据处理**: pandas, numpy
- **网络请求**: requests
- **金融数据源**: akshare, efinance, baostock, adata
- **配置文件**: PyYAML
- **Excel处理**: openpyxl
- **其他工具**: tqdm, retry, multitasking

所有依赖已记录在 `requirements.txt` 文件中。

## 运行环境
- **Python版本**: 3.11.13
- **环境类型**: Conda
- **操作系统**: Windows

## 如何运行项目

### 1. 安装依赖（已完成）
```bash
pip install -r requirements.txt
```

### 2. 运行主程序
```bash
cd d:\stock
python test.py
```

### 3. 查看结果
程序运行完成后，结果将保存在 `result.xlsx` 文件中。

## 主要功能

### 数据获取
- 支持多个数据源：akshare、efinance、baostock、adata
- 自动处理数据源切换和备用方案
- 支持代理池配置以避免反爬虫限制

### 数据存储
- 使用SQLite数据库进行本地数据存储
- 支持历史数据的增量更新
- 提供数据验证和清洗功能

### 交易策略
实现了"二波"交易策略：
- **长二波条件**: 过去5天涨跌幅小于5%，前10天存在涨跌幅大于9%的情况
- **短二波条件**: 前7天存在涨跌幅大于9%，后3天涨跌幅小于5%

### 结果输出
- 筛选符合条件的股票
- 生成Excel格式的分析报告
- 包含详细的股票数据和策略标记

## 注意事项

1. **数据源限制**: 部分金融数据接口可能有访问频率限制，项目已实现多数据源备份机制
2. **网络连接**: 需要稳定的网络连接以获取实时数据
3. **数据完整性**: 某些股票可能存在数据缺失（如总市值为None），程序会给出相应警告
4. **运行时间**: 首次运行时需要获取大量数据，可能需要较长时间

## 故障排除

如果遇到问题，请检查：
1. 网络连接是否正常
2. 依赖包是否正确安装
3. 数据库文件是否存在访问权限问题
4. 代理配置是否正确（如果使用代理）

## 扩展开发

项目结构清晰，易于扩展：
- 在 `strategy/` 目录下添加新的交易策略
- 在 `init/` 目录下添加新的数据源
- 修改 `test.py` 以调用不同的策略函数

项目依赖已全部安装完成，可以正常运行！
